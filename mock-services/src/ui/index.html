<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mock Services Control Panel</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>Mock Services Control Panel</h1>
    <div class="header-actions">
      <button id="clearAllBtn" class="btn btn-warning">Clear All Failures</button>
      <button id="resetBtn" class="btn btn-danger">Reset Topology</button>
      <span class="service-count" id="serviceCount"></span>
    </div>
  </header>

  <main>
    <div class="layout">
      <section class="topology-section">
        <h2>Service Topology</h2>
        <div class="topology-grid" id="topologyGrid">
          <div class="tier-column" data-tier="database">
            <h3>Database</h3>
            <div class="tier-services" id="tier-database"></div>
          </div>
          <div class="tier-column" data-tier="backend">
            <h3>Backend</h3>
            <div class="tier-services" id="tier-backend"></div>
          </div>
          <div class="tier-column" data-tier="api">
            <h3>API</h3>
            <div class="tier-services" id="tier-api"></div>
          </div>
          <div class="tier-column" data-tier="frontend">
            <h3>Frontend</h3>
            <div class="tier-services" id="tier-frontend"></div>
          </div>
        </div>
      </section>

      <aside class="sidebar">
        <section class="scenarios-section">
          <h2>Predefined Scenarios</h2>
          <div id="scenarioList"></div>
        </section>

        <section class="failures-section">
          <h2>Active Failures</h2>
          <div id="failureList"></div>
        </section>
      </aside>
    </div>
  </main>

  <div id="servicePanel" class="panel hidden">
    <div class="panel-header">
      <h3 id="servicePanelTitle">Service Details</h3>
      <button class="panel-close" id="panelClose">&times;</button>
    </div>
    <div class="panel-content">
      <div id="serviceDetails"></div>
      <div class="failure-controls">
        <h4>Inject Failure</h4>
        <div class="form-group">
          <label for="failureModeSelect">Failure Mode</label>
          <select id="failureModeSelect">
            <option value="outage">Outage (503)</option>
            <option value="high_latency">High Latency</option>
            <option value="error">Error (500)</option>
            <option value="intermittent">Intermittent</option>
          </select>
        </div>
        <div class="form-group" id="latencyConfig">
          <label for="latencyInput">Latency (ms)</label>
          <input type="number" id="latencyInput" value="3000" min="100" max="30000">
        </div>
        <div class="form-group" id="errorRateConfig" style="display: none;">
          <label for="errorRateInput">Error Rate (0-1)</label>
          <input type="number" id="errorRateInput" value="0.5" min="0" max="1" step="0.1">
        </div>
        <div class="form-group checkbox-group">
          <label>
            <input type="checkbox" id="cascadeCheckbox" checked>
            Cascade to dependents
          </label>
        </div>
        <div class="button-group">
          <button id="injectBtn" class="btn btn-danger">Inject Failure</button>
          <button id="clearBtn" class="btn btn-secondary">Clear Failure</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
