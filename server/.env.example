PORT=3001
DATABASE_PATH=./data/database.sqlite

# Authentication Mode
# Only one should be enabled at a time.
# If none are set, OIDC is used by default.

# Local Auth â€” username/password authentication, no external OIDC provider needed
# On first startup, creates an admin user from ADMIN_EMAIL and ADMIN_PASSWORD
# LOCAL_AUTH=true
# ADMIN_EMAIL=admin@example.com
# ADMIN_PASSWORD=changeme123

# OIDC Configuration (required unless LOCAL_AUTH=true)
OIDC_ISSUER_URL=
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OIDC_REDIRECT_URI=http://localhost:3001/api/auth/callback

# Session Configuration
# Generate a strong secret: node -e "console.log(require('crypto').randomBytes(48).toString('hex'))"
# Must be at least 32 characters in production. Weak/default values will cause startup failure.
SESSION_SECRET=change-me-to-random-32-char-string

# CORS
CORS_ORIGIN=http://localhost:3000

# SSRF Allowlist (optional)
# Comma-separated list of hostnames, wildcard patterns, and CIDR ranges
# that bypass SSRF blocking. Required for monitoring internal services.
# Examples:
#   localhost,127.0.0.0/8                                          (local dev)
#   *.internal,*.corp.com,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16 (corporate network)
SSRF_ALLOWLIST=localhost,127.0.0.0/8

# Reverse Proxy / HTTPS
# Set TRUST_PROXY when running behind a reverse proxy (nginx, AWS ALB, etc.)
# so that Express reads X-Forwarded-* headers for req.secure, req.ip, etc.
# Values: true, false, number (hop count), "loopback", IP/subnet, comma-separated list
TRUST_PROXY=

# Set to "true" to 301-redirect all HTTP requests to HTTPS.
# Requires TRUST_PROXY to be set when behind a reverse proxy.
# /api/health is exempted so load-balancer probes still work over HTTP.
REQUIRE_HTTPS=false

# Rate Limiting
# Global rate limit applies to all API endpoints
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100
# Auth rate limit applies to /api/auth endpoints (stricter)
AUTH_RATE_LIMIT_WINDOW_MS=60000
AUTH_RATE_LIMIT_MAX=10

# Logging
# Log level: fatal, error, warn, info, debug, trace, silent (default: info)
# In production, output is structured JSON; in development, output is pretty-printed.
LOG_LEVEL=info

# Data Retention
# How many days to keep latency, error, and audit log history (default: 365)
DATA_RETENTION_DAYS=365
# Time of day to run retention cleanup in HH:MM format, local time (default: 02:00)
RETENTION_CLEANUP_TIME=02:00

# Polling
# Max concurrent polls to the same target hostname (prevents DDoS amplification)
POLL_MAX_CONCURRENT_PER_HOST=3

# Alerting
# Base URL for deep links in alert messages (e.g., Slack buttons linking to Depsera)
# Example: https://depsera.internal.com
APP_BASE_URL=http://localhost:3000

